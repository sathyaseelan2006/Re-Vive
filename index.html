<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Re:Vive - Indian Heritage Platform</title>

    <!-- Performance Optimizations -->
    <link rel="stylesheet" href="css/performance-optimizations.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="preload" as="image" href="public/india-map.svg">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@300;400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <!-- Vercel Analytics -->
    <script type="module" src="js/analytics.js"></script>
</head>

<body>

    <!-- Header Section with User Profile -->
    <header class="heritage-header">
        <!-- User Profile Section with Dropdown -->
        <div class="user-profile-section" id="userProfileSection" style="display: none;">
            <div class="user-profile-trigger">
                <span class="user-name-text" id="userNameText">Guest</span>
                <span class="dropdown-arrow">‚ñº</span>
            </div>
            <div class="user-profile-dropdown">
                <button class="dropdown-item" id="editPreferencesBtn">
                    <span class="item-icon">‚öôÔ∏è</span>
                    <span class="item-text">Edit Preferences</span>
                </button>
                <button class="dropdown-item" id="clearPreferencesBtn">
                    <span class="item-icon">üóëÔ∏è</span>
                    <span class="item-text">Clear Preferences</span>
                </button>
                <button class="dropdown-item logout-item" id="logoutBtn">
                    <span class="item-icon">‚éã</span>
                    <span class="item-text">Logout</span>
                </button>
            </div>
        </div>

        <h1 class="main-title">RE:VIVE</h1>
        <p class="subtitle">Bringing India's Hidden Heritage Back to Life</p>
    </header>

    <!-- Main Content -->
    <main class="heritage-container">

        <!-- Welcome Section -->
        <section class="welcome-section reveal">
            <h2 class="section-title">Welcome to Re:Vive</h2>
            <p class="welcome-text">
                Embark on a journey through India's magnificent cultural landscape. From ancient temples to vibrant
                festivals,
                explore the diverse heritage that spans thousands of years across our incredible nation.
            </p>
        </section>


        <!-- Interactive Map Section -->
        <section class="map-section reveal">
            <div class="map-container">
                <img src="public/india-map.svg" alt="Map of India" id="indiaMapSVG" class="india-map">
            </div>
            <div class="select-region">SELECT YOUR REGION</div>
        </section>

        <!-- Features Section -->
        <section class="features-section reveal">
            <h2 class="section-title">Explore Heritage</h2>
            <div class="features-grid">
                <div class="feature-card reveal">
                    <h3 class="feature-title">Ancient Monuments</h3>
                    <p class="feature-description">Discover architectural marvels from the Mughal era to ancient temple
                        complexes.</p>
                </div>
                <div class="feature-card reveal">
                    <h3 class="feature-title">Cultural Traditions</h3>
                    <p class="feature-description">Experience the rich tapestry of festivals, arts, and customs across
                        regions.</p>
                </div>
                <div class="feature-card reveal">
                    <h3 class="feature-title">Historical Sites</h3>
                    <p class="feature-description">Visit UNESCO World Heritage sites and learn about India's glorious
                        past.</p>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer Section -->
    <footer class="heritage-footer">


        <p class="footer-text">Preserving India's Heritage for Future Generations</p>
        <div class="footer-links">
            <a href="#" class="footer-link" id="termsLink">Terms and Conditions</a>
            <span class="footer-separator">‚Ä¢</span>
            <a href="#" class="footer-link" id="copyrightLink">Copyright Disclaimer</a>
        </div>
        <p class="footer-copyright">¬© 2025 RE:VIVE. All rights reserved.</p>
    </footer>

    <!-- Terms and Conditions Modal -->
    <div id="termsModal" class="legal-modal">
        <div class="legal-modal-content">
            <span class="legal-modal-close" data-modal="termsModal">&times;</span>
            <h2>Terms and Conditions</h2>
            <div class="legal-modal-body">
                <p><strong>Last Updated:</strong> December 19, 2025</p>

                <h3>1. Acceptance of Terms</h3>
                <p>By accessing and using RE:VIVE ("the Platform"), you accept and agree to be bound by the terms and
                    provision of this agreement. If you do not agree to these Terms and Conditions, please do not use
                    this Platform.</p>

                <h3>2. Use License</h3>
                <p>Permission is granted to temporarily access the materials (information or software) on RE:VIVE for
                    personal, non-commercial transitory viewing only. This is the grant of a license, not a transfer of
                    title, and under this license you may not:</p>
                <ul>
                    <li>Modify or copy the materials</li>
                    <li>Use the materials for any commercial purpose or for any public display</li>
                    <li>Attempt to decompile or reverse engineer any software contained on RE:VIVE</li>
                    <li>Remove any copyright or other proprietary notations from the materials</li>
                    <li>Transfer the materials to another person or "mirror" the materials on any other server</li>
                </ul>

                <h3>3. Educational Purpose</h3>
                <p>RE:VIVE is an educational platform designed to promote awareness and appreciation of Indian heritage
                    and culture. All content is provided for informational and educational purposes only.</p>

                <h3>4. User Accounts</h3>
                <p>When you create an account with us, you must provide accurate, complete, and current information.
                    Failure to do so constitutes a breach of the Terms. You are responsible for safeguarding the
                    password and for all activities that occur under your account.</p>

                <h3>5. Content Accuracy</h3>
                <p>While we strive to provide accurate historical and cultural information, RE:VIVE makes no warranties
                    about the completeness, reliability, or accuracy of this information. Any reliance you place on such
                    information is strictly at your own risk.</p>

                <h3>6. AI-Generated Content</h3>
                <p>Some content on this platform may be generated or enhanced by artificial intelligence. While we make
                    efforts to ensure accuracy, AI-generated content should be verified with authoritative sources for
                    critical applications.</p>

                <h3>7. Privacy</h3>
                <p>Your use of RE:VIVE is also governed by our Privacy Policy. We collect and use personal information
                    in accordance with applicable data protection laws.</p>

                <h3>8. Modifications</h3>
                <p>RE:VIVE may revise these Terms and Conditions at any time without notice. By using this Platform, you
                    are agreeing to be bound by the then current version of these Terms and Conditions.</p>

                <h3>9. Limitation of Liability</h3>
                <p>In no event shall RE:VIVE or its suppliers be liable for any damages (including, without limitation,
                    damages for loss of data or profit, or due to business interruption) arising out of the use or
                    inability to use the materials on RE:VIVE.</p>

                <h3>10. Governing Law</h3>
                <p>These terms and conditions are governed by and construed in accordance with the laws of India, and
                    you irrevocably submit to the exclusive jurisdiction of the courts in that location.</p>
            </div>
        </div>
    </div>

    <!-- Copyright Disclaimer Modal -->
    <div id="copyrightModal" class="legal-modal">
        <div class="legal-modal-content">
            <span class="legal-modal-close" data-modal="copyrightModal">&times;</span>
            <h2>Copyright Disclaimer</h2>
            <div class="legal-modal-body">
                <p><strong>Last Updated:</strong> December 19, 2025</p>

                <h3>Copyright Notice</h3>
                <p>¬© 2025 RE:VIVE. All rights reserved.</p>
                <p>All content included on this platform, such as text, graphics, logos, images, audio clips, digital
                    downloads, data compilations, and software, is the property of RE:VIVE or its content suppliers and
                    is protected by Indian and international copyright laws.</p>

                <h3>Educational Fair Use</h3>
                <p>RE:VIVE is an educational platform dedicated to preserving and promoting Indian heritage. Content on
                    this platform is used for educational purposes under the principles of fair use and fair dealing as
                    recognized under Indian Copyright Act, 1957.</p>

                <h3>Third-Party Content</h3>
                <p>This platform may contain images, information, and content sourced from:</p>
                <ul>
                    <li>Government of India heritage databases and official sources</li>
                    <li>Archaeological Survey of India (ASI)</li>
                    <li>UNESCO World Heritage documentation</li>
                    <li>Public domain historical archives</li>
                    <li>Creative Commons licensed materials</li>
                    <li>User-generated content with appropriate permissions</li>
                </ul>

                <h3>Attribution</h3>
                <p>We make every effort to properly attribute all third-party content. If you believe any content on
                    this platform infringes your copyright, please contact us immediately with:</p>
                <ul>
                    <li>Identification of the copyrighted work claimed to have been infringed</li>
                    <li>Identification of the material that is claimed to be infringing</li>
                    <li>Your contact information</li>
                    <li>A statement that you have a good faith belief that use of the material is not authorized</li>
                    <li>A statement that the information in the notification is accurate</li>
                </ul>

                <h3>User-Generated Content</h3>
                <p>By submitting content to RE:VIVE, you grant us a non-exclusive, worldwide, royalty-free license to
                    use, reproduce, modify, and display such content for the purpose of operating and promoting the
                    platform.</p>

                <h3>AI-Generated Content</h3>
                <p>Some images and content on this platform may be generated using artificial intelligence tools. Such
                    content is created specifically for educational purposes and does not infringe on existing
                    copyrights.</p>

                <h3>Trademark Notice</h3>
                <p>RE:VIVE and associated logos are trademarks or registered trademarks. All other trademarks, service
                    marks, and trade names referenced in this platform are the property of their respective owners.</p>

                <h3>No Warranty</h3>
                <p>While we strive to ensure all content complies with copyright laws, RE:VIVE makes no warranty
                    regarding the copyright status of any content. Users should verify copyright status independently
                    for any commercial or critical use.</p>

                <h3>Reporting Copyright Infringement</h3>
                <p>If you believe that your work has been copied in a way that constitutes copyright infringement,
                    please contact us with detailed information so we can investigate and take appropriate action.</p>

                <h3>Disclaimer</h3>
                <p>This platform is provided for educational purposes only. The use of any content from this platform is
                    at the user's own risk. RE:VIVE disclaims all liability for any copyright infringement claims
                    arising from user actions.</p>
            </div>
        </div>
    </div>


    <!-- Performance Utils -->
    <script type="module" src="js/performance-utils.js" defer></script>
    <script type="module" src="js/main.js" defer></script>
    <script defer>
        // User Profile Logic
        window.addEventListener('DOMContentLoaded', () => {
            const user = JSON.parse(localStorage.getItem('user') || '{}');
            const userProfileSection = document.getElementById('userProfileSection');
            const userNameText = document.getElementById('userNameText');
            const logoutBtn = document.getElementById('logoutBtn');

            if (user && user.id && user.fullName) {
                // Show user profile in header
                userNameText.textContent = user.fullName;
                userProfileSection.style.display = 'flex';
            }

            // Toggle dropdown on click
            const userProfileTrigger = document.querySelector('.user-profile-trigger');
            if (userProfileTrigger) {
                userProfileTrigger.addEventListener('click', (e) => {
                    e.stopPropagation();
                    userProfileSection.classList.toggle('active');
                });

                // Close dropdown when clicking outside
                document.addEventListener('click', (e) => {
                    if (!userProfileSection.contains(e.target)) {
                        userProfileSection.classList.remove('active');
                    }
                });
            }

            // Edit Preferences Button
            const editPreferencesBtn = document.getElementById('editPreferencesBtn');
            if (editPreferencesBtn) {
                editPreferencesBtn.addEventListener('click', () => {
                    window.location.href = 'preferences.html';
                });
            }

            // Clear Preferences Button
            const clearPreferencesBtn = document.getElementById('clearPreferencesBtn');
            if (clearPreferencesBtn) {
                clearPreferencesBtn.addEventListener('click', async () => {
                    if (confirm('Are you sure you want to clear your preferences? This will remove all personalized recommendations.')) {
                        try {
                            // Use Supabase client (already initialized globally)
                            const SUPABASE_URL = 'https://lmxshtqwtapzrvnjbdsv.supabase.co';
                            const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxteHNodHF3dGFwenJ2bmpiZHN2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjU4ODkwMTYsImV4cCI6MjA4MTQ2NTAxNn0.bo7SGaBK76yLjsaqnfUXmZPOuZujEQGc-JcRFT3admA';
                            const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

                            // Get current user
                            const { data: { user: authUser }, error: authError } = await supabase.auth.getUser();

                            if (authError || !authUser) {
                                alert('Please login to clear preferences.');
                                return;
                            }

                            // Clear preferences in Supabase
                            const { error } = await supabase
                                .from('user_profiles')
                                .update({ preferences: [] })
                                .eq('user_id', authUser.id);

                            if (error) {
                                throw error;
                            }

                            alert('Preferences cleared successfully!');
                            // Clear local storage preferences
                            localStorage.removeItem('userPreferences');
                            localStorage.removeItem('emotionalProfile');
                            localStorage.removeItem('recommendedSites');
                            // Reload page
                            window.location.reload();
                        } catch (error) {
                            console.error('Error clearing preferences:', error);
                            alert('Error clearing preferences. Please try again.');
                        }
                    }
                });
            }

            // Logout Button
            if (logoutBtn) {
                logoutBtn.addEventListener('click', () => {
                    localStorage.clear();
                    window.location.href = 'login.html';
                });
            }

            // Legal Modals Functionality
            const termsLink = document.getElementById('termsLink');
            const copyrightLink = document.getElementById('copyrightLink');
            const termsModal = document.getElementById('termsModal');
            const copyrightModal = document.getElementById('copyrightModal');
            const closeButtons = document.querySelectorAll('.legal-modal-close');

            // Open Terms Modal
            if (termsLink) {
                termsLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    termsModal.style.display = 'block';
                    document.body.style.overflow = 'hidden';
                });
            }

            // Open Copyright Modal
            if (copyrightLink) {
                copyrightLink.addEventListener('click', (e) => {
                    e.preventDefault();
                    copyrightModal.style.display = 'block';
                    document.body.style.overflow = 'hidden';
                });
            }

            // Close modals when clicking X button
            closeButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const modalId = button.getAttribute('data-modal');
                    const modal = document.getElementById(modalId);
                    if (modal) {
                        modal.style.display = 'none';
                        document.body.style.overflow = 'auto';
                    }
                });
            });

            // Close modals when clicking outside
            window.addEventListener('click', (e) => {
                if (e.target.classList.contains('legal-modal')) {
                    e.target.style.display = 'none';
                    document.body.style.overflow = 'auto';
                }
            });
        });
    </script>
</body>

</html>